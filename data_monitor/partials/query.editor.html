<div class="editor-row">

	<div  ng-repeat="target in panel.targets"
        class="tight-form"
        ng-class="{'tight-form-disabled': target.hide}"
        ng-controller="MonQueryCtrl"
        ng-init="init()">
		<div  class="tight-form" ng-hide="target.rawQuery">
      <ul class="tight-form-list pull-right">
        <li ng-show="parserError" class="tight-form-item">
          <a bs-tooltip="parserError" style="color: rgb(229, 189, 28)" role="menuitem">
            <i class="fa fa-warning"></i>
          </a>
        </li>

				<li class="tight-form-item">
					Alias
				</li>
				<li>
					<input type="text" class="input-medium tight-form-input" ng-model="target.alias" spellcheck='false' placeholder="alias" ng-model-onblur ng-change="get_data()">
				</li>
        <li class="tight-form-item">
					<div class="dropdown">
						<a  class="pointer dropdown-toggle"
							data-toggle="dropdown"
							tabindex="1">
							<i class="fa fa-bars"></i>
						</a>
						<ul class="dropdown-menu pull-right" role="menu">
							<li role="menuitem">
								<a  tabindex="1"
									ng-click="duplicate()">
									Duplicate
								</a>
							</li>
							<li role="menuitem">
								<a  tabindex="1"
									ng-click="moveMetricQuery($index, $index-1)">
									Move up
								</a>
							</li>
							<li role="menuitem">
								<a  tabindex="1"
									ng-click="moveMetricQuery($index, $index+1)">
									Move down
								</a>
							</li>
						</ul>
					</div>
				</li>
				<li class="tight-form-item last">
					<a class="pointer" tabindex="1" ng-click="removeDataQuery(target)">
						<i class="fa fa-remove"></i>
					</a>
				</li>
			</ul>



			<ul class="tight-form-list">
				<li>
					<a  class="tight-form-item"
						ng-click="target.hide = !target.hide; get_data();"
						role="menuitem">
						<i class="fa fa-eye"></i>
					</a>
				</li>
			</ul>

			<input  type="text"
			        class="tight-form-clear-input span10"
              ng-model="target.query"
              focus-me="target.rawQuery"
              spellcheck='false'
              ng-model-onblur ng-change="targetTextChanged()"
              ng-show="target.rawQuery" />

      <ul class="tight-form-list" role="menu" ng-hide="target.rawQuery">

        <li ng-repeat="segment in segments" role="menuitem" graphite-segment></li>
				<li ng-repeat="func in functions">
          <span graphite-func-editor class="tight-form-item tight-form-func">
          </span>
        </li>
        <li class="dropdown" graphite-add-func>
        </li>

      </ul>


			<!-- <ul class="tight-form-list" role="menu" ng-hide="target.rawQuery">
				<li class="tight-form-item query-keyword" style="width: 75px;">
					Dimensions
				</li>
				<li class="dropdown" ng-repeat="field in target.fields">
					<span datamon-func-editor field="field" get-fields="getFields()" on-change="fieldChanged(field)" class="tight-form-item">
					</span>
				</li>
				<li>
					<metric-segment segment="addFieldSegment" get-alt-segments="getFieldSegments()" on-value-changed="addField()"></metric-segment>
				</li>
			</ul> -->

			<ul class="tight-form-list">
				<!-- <li class="tight-form-item">
					<i class="fa fa-eye invisible"></i>
				</li> -->
				<li class="tight-form-item query-keyword" style="width: 75px;">
					Metric
				</li>
				<li>
					<metric-segment segment="measurementSegment" get-alt-segments="getMeasurements()" on-value-changed="measurementChanged()"></metric-segment>
				</li>
			</ul>

			<ul class="tight-form-list" ng-hide="target.rawQuery">
				<li class="tight-form-item query-keyword">
					Group By
				</li>

				<li class="tight-form-item">
					$interval
				</li>

			</ul>
			<div class="clearfix"></div>
		</div>

			<div class="tight-form" ng-hide="target.rawQuery">
				<ul class="tight-form-list">
					<li class="tight-form-item">
						<i class="fa fa-eye invisible"></i>
					</li>

					<li class="tight-form-item query-keyword" style="width: 75px;">
						Dimensions
					</li>

					<li ng-repeat="segment in tagSegments">
						<metric-segment segment="segment" get-alt-segments="getTagsOrValues(segment, $index)" on-value-changed="tagSegmentUpdated(segment, $index)"></metric-segment>
					</li>
				</ul>
				<div class="clearfix"></div>
			</div>

			<!-- <div class="tight-form">
				<ul class="tight-form-list" ng-hide="target.rawQuery">
					<li class="tight-form-item">
						<i class="fa fa-eye invisible"></i>
					</li>

					<li class="tight-form-item query-keyword">
						GROUP BY
					</li>

					<li class="tight-form-item">
						$interval
					</li>

					<li ng-repeat="segment in groupBySegments">
						<metric-segment segment="segment" get-alt-segments="getGroupByTagSegments(segment, 0)" on-value-changed="groupByTagUpdated(segment, $index)"></metric-segment>
					</li>
				</ul>
				<div class="clearfix"></div>
			</div> -->


    </div>

		<!-- <div class="tight-form" ng-hide="target.rawQuery">
			<ul class="tight-form-list">
				<li class="tight-form-item">
					<i class="fa fa-eye invisible"></i>
				</li>
				<li class="tight-form-item query-keyword" style="width: 75px;">
					Metrice
				</li>
				<li>
					<metric-segment segment="measurementSegment" get-alt-segments="getMeasurements()" on-value-changed="measurementChanged()"></metric-segment>
				</li>
			</ul>
			<div class="clearfix"></div>
		</div> -->


</div>

<div class="editor-row">
	<div class="pull-left" style="margin-top: 30px;">
	</div>
</div>
